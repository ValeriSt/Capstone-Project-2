<%- include ("partials/header.ejs") %>
<!-- <div class="px-4 py-5 my-5 text-center">
 <img class="d-block mx-auto mb-4" src="/docs/5.3/assets/brand/bootstrap-logo.svg" alt="" width="72" height="57">
  <h1 class="display-5 fw-bold text-body-emphasis otherStories">Travel Stories</h1>
  <div class="col-lg-6 mx-auto">
    <p class="lead mb-4">Welcome to Travel Stories. Here you can share more about your adventures with other people and have a small touch to other people's adventures too.</p>
  </div>
</div> -->
<div class="mainPage">
<section title="Destinations">
  <div class="container destinations" id="custom-cards">
    <h2 class="pb-2 otherStories">Top Destinations</h2>
    
    <div class="row row-cols-1 row-cols-lg-3 align-items-stretch g-4 py-5">
      <div class="col">
        <a href="/Italy" class="nav-link">
          <div class="card card-cover h-100 overflow-hidden text-bg-dark rounded-4 shadow-lg pb-4 pt-4" style="background-image: url('https://cdn.britannica.com/36/162636-050-932C5D49/Colosseum-Rome-Italy.jpg'); background-size: cover;">
            <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1">
              <h3 class="destinationTitle mt-5 mb-5 display-4 lh-1 fw-bold">Italy</h3>
            </div>
          </div>
        </a>
      </div>
      
      <div class="col">
        <a href="/France" class="nav-link">
          <div class="card card-cover h-100 overflow-hidden text-bg-dark rounded-4 shadow-lg pb-4 pt-4" style="background-image: url('https://media.cntraveler.com/photos/58de89946c3567139f9b6cca/16:9/w_2560%2Cc_limit/GettyImages-468366251.jpg');background-size: cover;">
            <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1">
              <h3 class="destinationTitle mt-5 mb-5 display-4 lh-1 fw-bold">France</h3>
            </div>
          </div>
        </a>
      </div>
      
      <div class="col">
        <a href="/Spain" class="nav-link">
          <div class="card card-cover h-100 overflow-hidden text-bg-dark rounded-4 shadow-lg pb-4 pt-4" style="background-image: url('https://media.architecturaldigest.com/photos/5cfea4b0c9f2f22721f26766/master/pass/GettyImages-740527937.jpg'); background-size: cover;">
            <div class="d-flex flex-column h-100 p-5 pb-3 text-shadow-1">
              <h3 class="destinationTitle mt-5 mb-5 display-4 lh-1 fw-bold">Spain</h3>
            </div>
          </div>
        </a>
      </div>
    </div>
  </div>
</section>
  


<section title="Publications">
  <div class="container px-4 py-5">
    <% if (publications.some(publication => publication.country === 'Other')) { %>
      <div class="title">
        <h1 class="otherStories">Other Stories</h1>
      </div>
    <% } %>
    <div class="container cards row">
      <% 
        // Get the current time once when the page is loaded
        var currentTime = new Date().toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
        
        publications.filter(publication => publication.country === 'Other').forEach(function(publication, index) { 
          // Check if it's a multiple of 2 (i.e., even index) to start a new row
          if (index % 2 === 0) { %>
            <div class="row">
          <% } %>
          <div class="col-md-6">
            <div class="card mb-3 post-content">
              <div class="card-header">
                <h5 class="card-title"><%= publication.fName %></h5>
              </div>
              <div class="card-body">
                <p class="card-text"><%= publication.Story %></p>
                <!-- Display the fixed publication time captured when the page loaded -->
                <p class="date">Published at <%= currentTime %>.</p>
                <div id="rating">
        <% for (let i = 1; i <= 5; i++) { %>
            <span class="star" onclick="rate(`<%=i%>`)">â˜…</span>
        <% } %>
    </div>
    <p>Your rating: <span id="userRating">0</span>/5</p>
              </div>
            </div>
          </div>
          <% 
            // Check if it's the last item or if the next item will start a new row
            if (index === publications.length - 1 || (index + 1) % 2 === 0) { %>
              </div>
          <% } %>
      <% }); %>
    </div>
  </div>
</section>
  </div>
  <%- include("partials/footer.ejs")%>